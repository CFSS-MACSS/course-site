---
title: "Practice exploring college education data"
date: 2022-10-11
type: book
toc: true
draft: false
aliases: ["/eda_college.html", "/notes/exploratory-data-analysis-practice/"]
categories: ["eda"]

weight: 42
---

<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<div id="TOC">
<ul>
<li><a href="#which-type-of-college-has-the-highest-average-sat-score" id="toc-which-type-of-college-has-the-highest-average-sat-score"><span class="toc-section-number">0.1</span> Which type of college has the highest average SAT score?</a></li>
<li><a href="#what-is-the-relationship-between-net-cost-of-attendance-and-faculty-salaries-how-does-this-relationship-differ-across-types-of-colleges" id="toc-what-is-the-relationship-between-net-cost-of-attendance-and-faculty-salaries-how-does-this-relationship-differ-across-types-of-colleges"><span class="toc-section-number">0.2</span> What is the relationship between net cost of attendance and faculty salaries? How does this relationship differ across types of colleges?</a></li>
<li><a href="#how-are-a-colleges-pell-grant-recipients-related-to-the-average-students-education-debt" id="toc-how-are-a-colleges-pell-grant-recipients-related-to-the-average-students-education-debt"><span class="toc-section-number">0.3</span> How are a college’s Pell Grant recipients related to the average student’s education debt?</a></li>
<li><a href="#session-info" id="toc-session-info"><span class="toc-section-number">0.4</span> Session Info</a></li>
<li><a href="#acknowledgments" id="toc-acknowledgments"><span class="toc-section-number">0.5</span> Acknowledgments</a></li>
</ul>
</div>

<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>{{% callout note %}}
Run the code below in your console to download this exercise as a set of R scripts.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>usethis<span class="sc">::</span><span class="fu">use_course</span>(<span class="st">&quot;CFSS-MACSS/exploratory-data-analysis&quot;</span>)</span></code></pre></div>
<p>{{% /callout %}}</p>
<p>The Department of Education collects <a href="https://collegescorecard.ed.gov/">annual statistics on colleges and universities in the United States</a>. A subset of this data from 2018-19 is included in the <a href="https://github.com/CFSS-MACSS/rcis"><code>rcis</code></a> library from GitHub.</p>
<p>{{% callout note %}}
If you are working on your local R you need to install the package first by running the command <code>remotes::install_github("CFSS-MACSS/rcis")</code> in the console. If you don’t already have the <code>remotes</code> library installed, you will get an error. Go back and install this first using <code>install.packages("remotes")</code>, then run <code>remotes::install_github("CFSS-MACSS/rcis")</code>.
{{% /callout %}}</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">library</span>(rcis)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;scorecard&quot;</span>)</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="fu">glimpse</span>(scorecard)</span></code></pre></div>
<pre><code>## Rows: 1,721
## Columns: 14
## $ unitid    &lt;dbl&gt; 100654, 100663, 100706, 100724, 100751, 100830, 100858, 1009…
## $ name      &lt;chr&gt; &quot;Alabama A &amp; M University&quot;, &quot;University of Alabama at Birmin…
## $ state     &lt;chr&gt; &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, &quot;AL&quot;, …
## $ type      &lt;fct&gt; &quot;Public&quot;, &quot;Public&quot;, &quot;Public&quot;, &quot;Public&quot;, &quot;Public&quot;, &quot;Public&quot;, …
## $ admrate   &lt;dbl&gt; 0.8965, 0.8060, 0.7711, 0.9888, 0.8039, 0.9555, 0.8507, 0.60…
## $ satavg    &lt;dbl&gt; 959, 1245, 1300, 938, 1262, 1061, 1302, 1202, 1068, NA, 1101…
## $ cost      &lt;dbl&gt; 23445, 25542, 24861, 21892, 30016, 20225, 32196, 32514, 3483…
## $ netcost   &lt;dbl&gt; 15529, 16530, 17208, 19534, 20917, 13678, 24018, 19808, 2050…
## $ avgfacsal &lt;dbl&gt; 68391, 102420, 87273, 64746, 93141, 69561, 96498, 62649, 533…
## $ pctpell   &lt;dbl&gt; 0.7095, 0.3397, 0.2403, 0.7368, 0.1718, 0.4654, 0.1343, 0.22…
## $ comprate  &lt;dbl&gt; 0.2866, 0.6117, 0.5714, 0.3177, 0.7214, 0.3040, 0.7870, 0.70…
## $ firstgen  &lt;dbl&gt; 0.3658281, 0.3412237, 0.3101322, 0.3434343, 0.2257127, 0.381…
## $ debt      &lt;dbl&gt; 15250, 15085, 14000, 17500, 17671, 12000, 17500, 16000, 1425…
## $ locale    &lt;fct&gt; City, City, City, City, City, City, City, City, City, Suburb…</code></pre>
<p><code>glimpse()</code> is part of the <code>tibble</code> package and is a transposed version of <code>print()</code>: columns run down the page, and data runs across. With a data frame with multiple columns, sometimes there is not enough horizontal space on the screen to print each column. By transposing the data frame, we can see all the columns and the values recorded for the initial rows.</p>
<p>Type <code>?scorecard</code> in the console to open up the help file for this data set. This includes the documentation for all the variables. Use your knowledge of <code>dplyr</code> and <code>ggplot2</code> functions to answer the following questions.</p>
<div id="which-type-of-college-has-the-highest-average-sat-score" class="section level2" number="0.1">
<h2><span class="header-section-number">0.1</span> Which type of college has the highest average SAT score?</h2>
<p><strong>NOTE: This time, use a graph to visualize your answer, <a href="/notes/transform-college/#generate-a-data-frame-with-the-average-sat-score-for-each-type-of-college">not a table</a>.</strong></p>
<p>{{&lt; spoiler text=“Click for the solution” &gt;}}</p>
<p>We could use a <strong>boxplot</strong> to visualize the distribution of SAT scores.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">y =</span> satavg)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 598 rows containing non-finite values (`stat_boxplot()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/sat-boxplot-1.png" width="672" /></p>
<p>According to this graph, private, nonprofit schools have the highest average SAT score, followed by public and then private, for-profit schools. But this doesn’t reveal the entire picture.</p>
<p>What happens if we plot a <strong>histogram</strong> or <strong>frequency polygon</strong>? A frequency polygon is similar to a histogram but makes it easier to see the shape of the distribution.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> satavg)</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="at">facets =</span> <span class="fu">vars</span>(type))</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 598 rows containing non-finite values (`stat_bin()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/sat-histo-freq-1.png" width="672" /></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> satavg, <span class="at">color =</span> type)</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>()</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 598 rows containing non-finite values (`stat_bin()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/sat-histo-freq-2.png" width="672" /></p>
<p>From these graphs, we can see the averages for each college type are based on widely varying sample sizes.</p>
<p>Based on these results, we can further inquiry our data to check the observations that have valid SAT averages scores, thus filtering all the “NA”:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># observations with non-NA SAT averages</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>scorecard <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">drop_na</span>(satavg) <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> type)</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/sat-bar-1.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># what proportion of observations have NA for satavg?</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>scorecard <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="fu">group_by</span>(type) <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">prop =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(satavg)) <span class="sc">/</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">y =</span> prop)</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/sat-bar-2.png" width="672" /></p>
<p>There are far fewer private, for-profit colleges than the other categories. Furthermore, private, for-profit colleges disproportionately fail to report average SAT scores compared to the other categories (likely these schools do not require SAT scores from applicants).</p>
<p>A boxplot alone would not reveal this detail, which could be important in future analysis.</p>
<p>{{&lt; /spoiler &gt;}}</p>
</div>
<div id="what-is-the-relationship-between-net-cost-of-attendance-and-faculty-salaries-how-does-this-relationship-differ-across-types-of-colleges" class="section level2" number="0.2">
<h2><span class="header-section-number">0.2</span> What is the relationship between net cost of attendance and faculty salaries? How does this relationship differ across types of colleges?</h2>
<p>{{&lt; spoiler text=“Click for the solution” &gt;}}</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># geom_point</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> netcost, <span class="at">y =</span> avgfacsal)</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 52 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 52 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/cost-avgfacsal-1.png" width="672" /></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># geom_point with alpha transparency to reveal dense clusters</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> netcost, <span class="at">y =</span> avgfacsal)</span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 52 rows containing non-finite values (`stat_smooth()`).
## Removed 52 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/cost-avgfacsal-2.png" width="672" /></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co"># geom_hex</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> netcost, <span class="at">y =</span> avgfacsal)</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 52 rows containing non-finite values (`stat_binhex()`).</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 52 rows containing non-finite values (`stat_smooth()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/cost-avgfacsal-3.png" width="672" /></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># geom_point with smoothing lines for each type</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a>    <span class="at">x =</span> netcost,</span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>    <span class="at">y =</span> avgfacsal,</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>    <span class="at">color =</span> type</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>  )</span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 52 rows containing non-finite values (`stat_smooth()`).
## Removed 52 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/cost-avgfacsal-4.png" width="672" /></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co"># geom_point with facets for each type</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>    <span class="at">x =</span> netcost,</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>    <span class="at">y =</span> avgfacsal,</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>    <span class="at">color =</span> type</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>  )</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(type))</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 52 rows containing non-finite values (`stat_smooth()`).
## Removed 52 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/cost-avgfacsal-5.png" width="672" /></p>
<p>{{&lt; /spoiler &gt;}}</p>
</div>
<div id="how-are-a-colleges-pell-grant-recipients-related-to-the-average-students-education-debt" class="section level2" number="0.3">
<h2><span class="header-section-number">0.3</span> How are a college’s Pell Grant recipients related to the average student’s education debt?</h2>
<p>{{&lt; spoiler text=“Click for the solution” &gt;}}</p>
<p>Since both Pell Grant recipient <code>pctpell</code> and average student’s dept <code>debt</code> are continuous variables a <strong>scatterplot</strong> is appropriate:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> pctpell, <span class="at">y =</span> debt)</span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 116 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/pell-scatter-1.png" width="672" /></p>
<p>Hmm. There seem to be a lot of data points. It isn’t really clear if there is a trend. What if we make our data points semi-transparent using the <code>alpha</code> aesthetic?</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> pctpell, <span class="at">y =</span> debt)</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 116 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/pell-alpha-1.png" width="672" /></p>
<p>Now we’re getting somewhere. I’m beginning to see some dense clusters in the middle. Maybe a <strong>hexagon binning</strong> plot would help</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> pctpell, <span class="at">y =</span> debt)</span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a>  <span class="fu">geom_hex</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 116 rows containing non-finite values (`stat_binhex()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/pell-bin-1.png" width="672" /></p>
<p>This is getting better. It looks like there might be a downward trend; that is, as the percentage of Pell grant recipients increases, average student debt decreases. Let’s confirm this by going back to the scatterplot and overlaying a <strong>smoothing line</strong>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>  <span class="at">data =</span> scorecard,</span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> pctpell, <span class="at">y =</span> debt)</span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula = &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<pre><code>## Warning: Removed 116 rows containing non-finite values (`stat_smooth()`).</code></pre>
<pre><code>## Warning: Removed 116 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/pell-smooth-1.png" width="672" /></p>
<p>This confirms our initial evidence - there is an apparent negative relationship.</p>
<p>Take-home point: Notice how we iterated through several different plots before we created one that provided the most informative visualization. <strong>You will not create the perfect graph on your first attempt.</strong> Trial and error is necessary in this exploratory stage. Be prepared to revise your code again and again.</p>
<p>{{&lt; /spoiler &gt;}}</p>
</div>
<div id="session-info" class="section level2" number="0.4">
<h2><span class="header-section-number">0.4</span> Session Info</h2>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>sessioninfo<span class="sc">::</span><span class="fu">session_info</span>()</span></code></pre></div>
<pre><code>## ─ Session info ───────────────────────────────────────────────────────────────
##  setting  value
##  version  R version 4.3.0 (2023-04-21)
##  os       macOS Monterey 12.6.6
##  system   aarch64, darwin20
##  ui       X11
##  language (EN)
##  collate  en_US.UTF-8
##  ctype    en_US.UTF-8
##  tz       America/Chicago
##  date     2023-06-15
##  pandoc   3.1.1 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/ (via rmarkdown)
## 
## ─ Packages ───────────────────────────────────────────────────────────────────
##  package     * version date (UTC) lib source
##  blogdown      1.17    2023-05-16 [1] CRAN (R 4.3.0)
##  bookdown      0.34    2023-05-09 [1] CRAN (R 4.3.0)
##  bslib         0.5.0   2023-06-09 [1] CRAN (R 4.3.0)
##  cachem        1.0.8   2023-05-01 [1] CRAN (R 4.3.0)
##  cli           3.6.1   2023-03-23 [1] CRAN (R 4.3.0)
##  codetools     0.2-19  2023-02-01 [1] CRAN (R 4.3.0)
##  colorspace    2.1-0   2023-01-23 [1] CRAN (R 4.3.0)
##  digest        0.6.31  2022-12-11 [1] CRAN (R 4.3.0)
##  dplyr       * 1.1.2   2023-04-20 [1] CRAN (R 4.3.0)
##  evaluate      0.21    2023-05-05 [1] CRAN (R 4.3.0)
##  fansi         1.0.4   2023-01-22 [1] CRAN (R 4.3.0)
##  farver        2.1.1   2022-07-06 [1] CRAN (R 4.3.0)
##  fastmap       1.1.1   2023-02-24 [1] CRAN (R 4.3.0)
##  forcats     * 1.0.0   2023-01-29 [1] CRAN (R 4.3.0)
##  generics      0.1.3   2022-07-05 [1] CRAN (R 4.3.0)
##  ggplot2     * 3.4.2   2023-04-03 [1] CRAN (R 4.3.0)
##  glue          1.6.2   2022-02-24 [1] CRAN (R 4.3.0)
##  gtable        0.3.3   2023-03-21 [1] CRAN (R 4.3.0)
##  here          1.0.1   2020-12-13 [1] CRAN (R 4.3.0)
##  hexbin        1.28.3  2023-03-21 [1] CRAN (R 4.3.0)
##  highr         0.10    2022-12-22 [1] CRAN (R 4.3.0)
##  hms           1.1.3   2023-03-21 [1] CRAN (R 4.3.0)
##  htmltools     0.5.5   2023-03-23 [1] CRAN (R 4.3.0)
##  jquerylib     0.1.4   2021-04-26 [1] CRAN (R 4.3.0)
##  jsonlite      1.8.5   2023-06-05 [1] CRAN (R 4.3.0)
##  knitr         1.43    2023-05-25 [1] CRAN (R 4.3.0)
##  labeling      0.4.2   2020-10-20 [1] CRAN (R 4.3.0)
##  lattice       0.21-8  2023-04-05 [1] CRAN (R 4.3.0)
##  lifecycle     1.0.3   2022-10-07 [1] CRAN (R 4.3.0)
##  lubridate   * 1.9.2   2023-02-10 [1] CRAN (R 4.3.0)
##  magrittr      2.0.3   2022-03-30 [1] CRAN (R 4.3.0)
##  Matrix        1.5-4   2023-04-04 [1] CRAN (R 4.3.0)
##  mgcv          1.8-42  2023-03-02 [1] CRAN (R 4.3.0)
##  munsell       0.5.0   2018-06-12 [1] CRAN (R 4.3.0)
##  nlme          3.1-162 2023-01-31 [1] CRAN (R 4.3.0)
##  pillar        1.9.0   2023-03-22 [1] CRAN (R 4.3.0)
##  pkgconfig     2.0.3   2019-09-22 [1] CRAN (R 4.3.0)
##  purrr       * 1.0.1   2023-01-10 [1] CRAN (R 4.3.0)
##  R6            2.5.1   2021-08-19 [1] CRAN (R 4.3.0)
##  rcis        * 0.2.7   2023-06-14 [1] Github (CFSS-MACSS/rcis@a4b198f)
##  readr       * 2.1.4   2023-02-10 [1] CRAN (R 4.3.0)
##  rlang         1.1.1   2023-04-28 [1] CRAN (R 4.3.0)
##  rmarkdown     2.22    2023-06-01 [1] CRAN (R 4.3.0)
##  rprojroot     2.0.3   2022-04-02 [1] CRAN (R 4.3.0)
##  rstudioapi    0.14    2022-08-22 [1] CRAN (R 4.3.0)
##  sass          0.4.6   2023-05-03 [1] CRAN (R 4.3.0)
##  scales        1.2.1   2022-08-20 [1] CRAN (R 4.3.0)
##  sessioninfo   1.2.2   2021-12-06 [1] CRAN (R 4.3.0)
##  stringi       1.7.12  2023-01-11 [1] CRAN (R 4.3.0)
##  stringr     * 1.5.0   2022-12-02 [1] CRAN (R 4.3.0)
##  tibble      * 3.2.1   2023-03-20 [1] CRAN (R 4.3.0)
##  tidyr       * 1.3.0   2023-01-24 [1] CRAN (R 4.3.0)
##  tidyselect    1.2.0   2022-10-10 [1] CRAN (R 4.3.0)
##  tidyverse   * 2.0.0   2023-02-22 [1] CRAN (R 4.3.0)
##  timechange    0.2.0   2023-01-11 [1] CRAN (R 4.3.0)
##  tzdb          0.4.0   2023-05-12 [1] CRAN (R 4.3.0)
##  utf8          1.2.3   2023-01-31 [1] CRAN (R 4.3.0)
##  vctrs         0.6.2   2023-04-19 [1] CRAN (R 4.3.0)
##  withr         2.5.0   2022-03-03 [1] CRAN (R 4.3.0)
##  xfun          0.39    2023-04-20 [1] CRAN (R 4.3.0)
##  yaml          2.3.7   2023-01-23 [1] CRAN (R 4.3.0)
## 
##  [1] /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/library
## 
## ──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div id="acknowledgments" class="section level2" number="0.5">
<h2><span class="header-section-number">0.5</span> Acknowledgments</h2>
<ul>
<li>This page has been developed starting from Sabrina Nardin and Benjamin Soltoff’s “Computing for the Social Sciences” course materials, licensed under the CC BY-NC 4.0 Creative Commons License.</li>
</ul>
</div>
