---
title: "Exploratory data analysis"
author: "MACS 30500 <br /> University of Chicago"
output: rcfss::xaringan_wide
---

```{r setup, include=FALSE}
# generate CSS file
library(xaringanthemer)
rcfss::xaringan_theme()

options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  cache = TRUE,
  echo = TRUE,
  message = FALSE,
  warning = FALSE,
  fig.width = 8, fig.asp = 0.618, fig.retina = 3, dpi = 300,
  fig.showtext = TRUE,
  fig.align = "center",
  out.width = "80%"
)

library(tidyverse)
library(palmerpenguins)
library(rcfss)
library(knitr)
library(patchwork)
library(flipbookr)

set.seed(1234)
theme_set(theme_gray(base_size = rcfss::base_size))
```

# Exploratory data analysis

1. Generate questions about your data
1. Search for answers by visualizing, transforming, and modeling your data
1. Use what you learn to refine your questions and or generate new questions
1. Rinse and repeat until you publish a paper

--

* Variation
* Covariation

---

class: inverse, center, middle

# Characteristics of Exploratory Data Analysis

---

```{r penguins-eda, warning = FALSE, include = FALSE}
ggplot(
  data = penguins,
  mapping = aes(
    x = body_mass_g,
    y = flipper_length_mm
  )
) +
  geom_point() +
  geom_smooth()
```

`r chunk_reveal(chunk_name = "penguins-eda", break_type = "auto")`

---

class: inverse, center, middle

# Characteristics of Confirmatory Data Analysis

---

```{r penguins-final, include = FALSE}
ggplot(
  data = penguins,
  mapping = aes(
    x = body_mass_g,
    y = flipper_length_mm
  )
) +
  geom_point(alpha = .1) +
  geom_smooth(se = FALSE) +
  labs(
    title = "Relationship between body mass and\nflipper length of a penguin",
    subtitle = "Sample of 344 penguins",
    x = "Body mass(g)",
    y = "Flipper length(mm)"
  ) +
  theme_xaringan(
    title_font_size = 18,
    text_font_size = 16
  )
```

`r chunk_reveal(chunk_name = "penguins-final", break_type = "auto")`

---

# `scorecard`

```{r epa-data}
glimpse(scorecard)
```

---

class: inverse, middle, center

# Histograms

---

```{r histogram, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(x = cost)
) +
  geom_histogram()
```

`r chunk_reveal(chunk_name = "histogram")`

---

```{r histogram-bins, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(x = cost)
) +
  geom_histogram(bins = 50) + #ROTATE
  geom_histogram(bins = 30) + #ROTATE
  geom_histogram(bins = 10) #ROTATE
```

`r chunk_reveal(chunk_name = "histogram-bins", break_type = "rotate")`

---

class: inverse, middle, center

# Bar charts

---

```{r barplot, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(x = type)
) +
  geom_bar()
```

`r chunk_reveal(chunk_name = "barplot")`

---

# Covariation

1. Two-dimensional graphs
1. Multiple window plots
1. Utilizing additional channels

---

class: inverse, middle, center

# Box plots

---

```{r boxplot, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(
    x = type,
    y = cost
  )
) +
  geom_boxplot()
```

`r chunk_reveal(chunk_name = "boxplot")`

---

class: inverse, middle, center

# Scatterplots

---

```{r scatterplot, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(
    x = cost,
    y = netcost
  )
) +
  geom_point()
```

`r chunk_reveal(chunk_name = "scatterplot")`

---

class: inverse, center, middle

# Multiple window plots

---

```{r histogram-facet, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(x = cost)
) +
  geom_histogram() + #BREAK
  facet_wrap(facets = vars(type)) #BREAK
```

`r chunk_reveal(chunk_name = "histogram-facet", break_type = "user")`

---

```{r scatterplot-facet, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(
    x = cost,
    y = netcost
  )
) +
  geom_point() + #BREAK
  facet_wrap(facets = vars(type)) #BREAK
```

`r chunk_reveal(chunk_name = "scatterplot-facet", break_type = "user")`

---

class: inverse, center, middle

# Utilizing additional channels

---

```{r scatterplot-mult-channels, include = FALSE}
ggplot(
  data = scorecard,
  mapping = aes(
    x = cost,
    y = netcost
  )
) +
  geom_point(mapping = aes(color = type)) + #ROTATE
  geom_point(mapping = aes(color = type, size = debt)) #ROTATE
```

`r chunk_reveal(chunk_name = "scatterplot-mult-channels", break_type = "rotate", font_size_code = "60%")`
