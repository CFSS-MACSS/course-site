---
title: "Data Structures"
author: "MACSS 30500 <br /> University of Chicago"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    nature:
      highlightStyle: magula
      highlightLines: true
      highlightLanguage: r
      ratio: 16:9
      countIncrementalSlides: false
---

```{r setup, include = FALSE}
# generate CSS file
library(xaringanthemer)
style_duo_accent(
  primary_color = "#011f4b",
  secondary_color = "#bbd6c7",
  inverse_header_color = "#222222",
  black_color = "#222222",
  header_font_google = xaringanthemer::google_font("Atkinson Hyperlegible"),
  text_font_google = xaringanthemer::google_font("Atkinson Hyperlegible"),
  code_font_google = xaringanthemer::google_font("Source Code Pro"),
  base_font_size = "24px",
  code_font_size = "20px",
  # title_slide_background_image = "https://github.com/uc-dataviz/course-notes/raw/main/images/hexsticker.svg",
  # title_slide_background_size = "contain",
  # title_slide_background_position = "top",
  header_h1_font_size = "2rem",
  header_h2_font_size = "1.75rem",
  header_h3_font_size = "1.5rem",
  extra_css = list(
    "h1" = list(
      "margin-block-start" = "0.4rem",
      "margin-block-end" = "0.4rem"
    ),
    "h2" = list(
      "margin-block-start" = "0.4rem",
      "margin-block-end" = "0.4rem"
    ),
    "h3" = list(
      "margin-block-start" = "0.4rem",
      "margin-block-end" = "0.4rem"
    ),
    ".tiny" = list("font-size" = "70%"),
    ".small" = list("font-size" = "90%"),
    ".midi" = list("font-size" = "150%"),
    ".tiny .remark-code" = list("font-size" = "70%"),
    ".small .remark-code" = list("font-size" = "90%"),
    ".midi .remark-code" = list("font-size" = "150%"),
    ".large" = list("font-size" = "200%"),
    ".xlarge" = list("font-size" = "600%"),
    ".huge" = list(
      "font-size" = "400%",
      "font-family" = "'Montserrat', sans-serif",
      "font-weight" = "bold"
    ),
    ".hand" = list(
      "font-family" = "'Gochi Hand', cursive",
      "font-size" = "125%"
    ),
    ".task" = list(
      "padding-right" = "10px",
      "padding-left" = "10px",
      "padding-top" = "3px",
      "padding-bottom" = "3px",
      "margin-bottom" = "6px",
      "margin-top" = "6px",
      "border-left" = "solid 5px #F1DE67",
      "background-color" = "#F3D03E"
    ),
    ".pull-left" = list(
      "width" = "49%",
      "float" = "left"
    ),
    ".pull-right" = list(
      "width" = "49%",
      "float" = "right"
    ),
    ".pull-left-wide" = list(
      "width" = "70%",
      "float" = "left"
    ),
    ".pull-right-narrow" = list(
      "width" = "27%",
      "float" = "right"
    ),
    ".pull-left-narrow" = list(
      "width" = "27%",
      "float" = "left"
    ),
    ".pull-right-wide" = list(
      "width" = "70%",
      "float" = "right"
    ),
    ".blue" = list(color = "#2A9BB7"),
    ".purple" = list(color = "#a493ba"),
    ".yellow" = list(color = "#f1de67"),
    ".gray" = list(color = "#222222")
  )
)

source(here::here("R", "slide-opts.R"))
xaringanExtra::use_panelset()
```

```{r pkgs, include = FALSE, cache = FALSE}
library(tidyverse)
library(rcis)
library(countdown)
library(modeldata)
library(here)

set.seed(1234)
theme_set(theme_minimal(base_size = 16))
```

```{r echo = FALSE, out.width = "60%"}
include_graphics(path = "https://r4ds.had.co.nz/diagrams/data-structures-overview.png")
```

<!-- notes:
this is a new lecture that focuses on a general review of data structures
from the original lecture ("vectors-and-iteration") I kept the vectors and lists here 
and I need to enlarge this lecture with more data structures
I do not think I need all libraries listed there, double check

also check this lecture corresponding pages on the syllabus 
this lecture does not have notes (content > notes)
make sure to do that ahead of time to ensure things work!
-->

---

class: inverse, middle

# Atomic vectors

---

## Logical vectors

```{r parse-logical, collapse = TRUE}
parse_logical(c("TRUE", "TRUE", "FALSE", "TRUE", "NA"))
```

--

## Numeric vectors

```{r parse-numeric, collapse = TRUE}
parse_integer(c("1", "5", "3", "4", "12423"))
parse_double(c("4.2", "4", "6", "53.2"))
```

--

## Character vectors

```{r parse-character, collapse = TRUE}
parse_character(c("Goodnight Moon", "Runaway Bunny", "Big Red Barn"))
```

---

## Scalars

```{r recycle}
(x <- sample(10))
x + c(100, 100, 100, 100, 100, 100, 100, 100, 100, 100)
x + 100
```

---

## Vector recycling

```{r recycle-bad}
# create a sequence of numbers between 1 and 10
(x1 <- seq(from = 1, to = 2))
(x2 <- seq(from = 1, to = 10))

# add together two sequences of numbers
x1 + x2
```

---

## Subsetting vectors

```{r subset-vec}
x <- c("one", "two", "three", "four", "five")
```

* With positive integers

```{r subset-pos, collapse = TRUE}
x[c(3, 2, 5)]
```

* With negative integers

```{r subset-neg, collapse = TRUE}
x[c(-1, -3, -5)]
```

* Don't mix positive and negative

```{r subset-both, collapse = TRUE, error = TRUE}
x[c(-1, 1)]
```

---

## Subset with a logical vector

```{r subset-logic}
(x <- c(10, 3, NA, 5, 8, 1, NA))

# All non-missing values of x
!is.na(x)
x[!is.na(x)]

# All even (or missing!) values of x
x[x %% 2 == 0]
```

---

class: inverse, middle

# Lists

---

## Lists

```{r list}
x <- list(1, 2, 3)
x
```

---

## Lists: `str()`

```{r str}
str(x)

x_named <- list(a = 1, b = 2, c = 3)
str(x_named)
```

---

## Store a mix of objects

```{r list-mix}
y <- list("a", 1L, 1.5, TRUE)
str(y)
```
   
---

```{r echo = FALSE}
include_graphics(path = "/img/xzibit-lists.jpg")
```

---

## Nested lists

```{r list-list}
z <- list(list(1, 2), list(3, 4))
str(z)
```

---

## Secret lists

```{r list-df}
str(gun_deaths)
```

---

```{r echo = FALSE, out.width = "60%"}
include_graphics(path = "https://r4ds.had.co.nz/diagrams/lists-subsetting.png")
```

---

## Exercise on subsetting vectors

```{r echo = FALSE, out.width = "50%"}
include_graphics(path = "https://media.giphy.com/media/uLUgjrzvQPXV5sTZeY/giphy.gif")
```

```{r cache = FALSE, echo = FALSE}
countdown(minutes = 12)
```
---

## Acknowledgments 

The content of these slides is derived in part from Benjamin Soltoff’s “Computing for the Social Sciences” course materials, licensed under the CC BY NC 4.0 Creative Commons License. Any errors or oversights are mine alone.