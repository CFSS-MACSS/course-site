---
title: "Data Structures"
author: "MACSS 30500 <br /> University of Chicago"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    nature:
      highlightStyle: magula
      highlightLines: true
      highlightLanguage: r
      ratio: 16:9
      countIncrementalSlides: false
---

```{r setup, include = FALSE}
# generate CSS file
library(xaringanthemer)
style_duo_accent(
  primary_color = "#011f4b",
  secondary_color = "#bbd6c7",
  inverse_header_color = "#222222",
  black_color = "#222222",
  header_font_google = xaringanthemer::google_font("Atkinson Hyperlegible"),
  text_font_google = xaringanthemer::google_font("Atkinson Hyperlegible"),
  code_font_google = xaringanthemer::google_font("Source Code Pro"),
  base_font_size = "24px",
  code_font_size = "20px",
  # title_slide_background_image = "https://github.com/uc-dataviz/course-notes/raw/main/images/hexsticker.svg",
  # title_slide_background_size = "contain",
  # title_slide_background_position = "top",
  header_h1_font_size = "2rem",
  header_h2_font_size = "1.75rem",
  header_h3_font_size = "1.5rem",
  extra_css = list(
    "h1" = list(
      "margin-block-start" = "0.4rem",
      "margin-block-end" = "0.4rem"
    ),
    "h2" = list(
      "margin-block-start" = "0.4rem",
      "margin-block-end" = "0.4rem"
    ),
    "h3" = list(
      "margin-block-start" = "0.4rem",
      "margin-block-end" = "0.4rem"
    ),
    ".tiny" = list("font-size" = "70%"),
    ".small" = list("font-size" = "90%"),
    ".midi" = list("font-size" = "150%"),
    ".tiny .remark-code" = list("font-size" = "70%"),
    ".small .remark-code" = list("font-size" = "90%"),
    ".midi .remark-code" = list("font-size" = "150%"),
    ".large" = list("font-size" = "200%"),
    ".xlarge" = list("font-size" = "600%"),
    ".huge" = list(
      "font-size" = "400%",
      "font-family" = "'Montserrat', sans-serif",
      "font-weight" = "bold"
    ),
    ".hand" = list(
      "font-family" = "'Gochi Hand', cursive",
      "font-size" = "125%"
    ),
    ".task" = list(
      "padding-right" = "10px",
      "padding-left" = "10px",
      "padding-top" = "3px",
      "padding-bottom" = "3px",
      "margin-bottom" = "6px",
      "margin-top" = "6px",
      "border-left" = "solid 5px #F1DE67",
      "background-color" = "#F3D03E"
    ),
    ".pull-left" = list(
      "width" = "49%",
      "float" = "left"
    ),
    ".pull-right" = list(
      "width" = "49%",
      "float" = "right"
    ),
    ".pull-left-wide" = list(
      "width" = "70%",
      "float" = "left"
    ),
    ".pull-right-narrow" = list(
      "width" = "27%",
      "float" = "right"
    ),
    ".pull-left-narrow" = list(
      "width" = "27%",
      "float" = "left"
    ),
    ".pull-right-wide" = list(
      "width" = "70%",
      "float" = "right"
    ),
    ".blue" = list(color = "#2A9BB7"),
    ".purple" = list(color = "#a493ba"),
    ".yellow" = list(color = "#f1de67"),
    ".gray" = list(color = "#222222")
  )
)

source(here::here("R", "slide-opts.R"))
xaringanExtra::use_panelset()
```

```{r pkgs, include = FALSE, cache = FALSE}
library(tidyverse)
library(rcis)
library(countdown)
library(modeldata)
library(here)

set.seed(1234)
theme_set(theme_minimal(base_size = 16))
```

class: inverse, middle

# R Base Data Structures

<!-- notes:
this is a new lecture that focuses on a general review of data structures
from the original lecture ("vectors-and-iteration") I kept the vectors and lists here 
and I need to enlarge this lecture with more data structures
I do not think I need all libraries listed there, double check

also check this lecture corresponding pages on the syllabus 
this lecture does not have notes (content > notes)
make sure to do that ahead of time to ensure things work!
-->

---

### R Base Data Structures: 

* Vectors
* Matrices
* Lists
* Data frames
* Arrays

These data structures can be organized by:
- their dimensions (1d, 2d, or nd)
- whether they are homogeneous (all contents must be of the same type, like vectors and matrices) or heterogeneous (contents can be of different types, like lists and data frames)

**Review lecture 2 scripts (`introR_lecture`)** to define, subset, and manipulate these data structures.

---

### R is fundamentally a vector-based program:
```{r echo = FALSE, out.width = "60%"}
include_graphics(path = "https://r4ds.had.co.nz/diagrams/data-structures-overview.png")
```

---

### Types of atomic vectors

**All values in an atomic vector must to be of the same type (homogeneous)**.

**Logical**: you have used it every time you use a conditional test or operation, like if-else
```{r parse-logical, collapse = TRUE}
logical_vector <- c("TRUE", "TRUE", "FALSE", "TRUE", "NA")
```

**Numeric**: can be integer or double
```{r parse-numeric, collapse = TRUE}
integer_vector <- c("1", "5", "3", "4", "12423")
double_vector <- c("4.2", "4", "6", "53.2")
```

**Character**: note you can both use single or double quotations, you just need to be consistent
```{r parse-character, collapse = TRUE}
character_vector <- c("Goodnight Moon", "Runaway Bunny", 'Big Red Barn')
```

---

### Scalars

R has no concept of a scalar: **in R, a scalar is simply a vector of length 1**

```{r recycle}
# set up a sample vector with 10 values
(x <- sample(10))

# add 100 to x
x + c(100, 100, 100, 100, 100, 100, 100, 100, 100, 100)

# add 100 to x: the R way
x + 100
```

---

### Vector Recycling

This will work for any vector of any length. For example:
```{r recycle-bad}
# x1 is sequence of numbers from 1 to 2
(x1 <- seq(from = 1, to = 2))

# x2 is a sequence of numbers from 1 to 10
(x2 <- seq(from = 1, to = 10))
```

If we add `x1` and `x2` together, R will do it, but the result might not be what we intend to do:
```{r}
x1 + x2
```

---

### Vector Recycling

If we add `x1` and `x2` together, R will do it, but the result might not be what we intend to do:
```{r}
x1 + x2
```

The shorter vector, `x1`, is duplicated five times in order to match the length of the longer vector `x2.` This behavior is called `vector recyling` and happens automatically in R. 

---

### Subsetting vectors

```{r subset-vec}
x <- c("one", "two", "three", "four", "five")
```

With positive integers (values we want to keep)
```{r subset-pos, collapse = TRUE}
x[c(3, 2, 5)]
```

With negative integers (values we do not want to keep)
```{r subset-neg, collapse = TRUE}
x[c(-1, -3, -5)]
```

Don't mix positive and negative
```{r subset-both, collapse = TRUE, error = TRUE}
x[c(-1, 1)]
```

---

### Subset with a logical vector

This is useful for conditional subletting. Let's say we have a vector `x`:

```{r subset-logic}
(x <- c(10, 3, NA, 5, 8, 1, NA))
```

We want to keep all the non-missing values in our vector. To find them we can use `is.na()` (the `!` reverts the output so we get TRUE for non-missing and FALSE for missing):
```{r}
!is.na(x)
```

Then, we put the function into `[]` to apply to our `x` vector:
```{r}
x[!is.na(x)]
```

---

class: inverse, middle

# Lists

---

## Lists

Lists are another type of vector, but they are not atomic vector. They are created with the `list()` function. Notice the output is different than the output from an atomic vector:
```{r list}
x <- list(1, 2, 3)
x
```

---

## Lists: `str()`

List objects are structured as a list of independent elements. We can use `str()` to see their structure: 
```{r str}
str(x)
```

Unlike atomic vectors, lists can contain multiple data types, and we can also name each of them:
```{r}
x_named <- list(a = "a", b = 2, c = 3)
str(x_named)
```

---

## Nested lists

In this object `z` we have two lists:
```{r list-list}
z <- list(list(1, 2), list(3, 4))
str(z)
```

This is useful when you interact with API to get data from the web (frequently you have this type of nested list as output).

---

## Secret lists: data frames!

Notice, we have been using lists in the class: a data frame at the end of the day is a list object
```{r list-df}
str(gun_deaths)
```

The only difference is that the length of each list object in the data frame has to the same (thus, a data frame is rectangular).

---

### Subsetting lists

```{r echo = FALSE, out.width = "60%"}
include_graphics(path = "https://r4ds.had.co.nz/diagrams/lists-subsetting.png")
```

---

class: inverse, middle

# Practice subsetting vectors

---

## Acknowledgments 

The content of these slides is derived in part from Benjamin Soltoff’s “Computing for the Social Sciences” course materials, licensed under the CC BY NC 4.0 Creative Commons License. Any errors or oversights are mine alone.